"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[411],{7411:(j,p,o)=>{o.r(p),o.d(p,{SignupComponent:()=>Q});var m=o(6814),a=o(95),v=o(5961);const w=r=>{const i=r.get("password")?.value,e=r.get("confirmPassword")?.value;return i&&e&&i===e?null:{confirmPassword:!0}},y=r=>{const{value:i}=r;return i?i.length<8?{passwordStrength:"at least 8 characters"}:/[A-Z]+/.test(i)?/[0-9]+/.test(i)?/[!@#?\]]/.test(i)?null:{passwordStrength:"inclusion of at least one special character, e.g., ! @ # ? ]"}:{passwordStrength:"a mixture of letters and numbers"}:{passwordStrength:"a uppercase letter"}:null};var T=o(7398),A=o(8180),u=o(2284),t=o(5879),d=o(4221);let x=(()=>{class r{validate(e){return this.store.select(u.ZX).pipe((0,T.U)(n=>n&&e.value===n?{emailExist:!0}:null),(0,A.q)(1))}constructor(e){this.store=e}static#t=this.\u0275fac=function(n){return new(n||r)(t.LFG(d.yh))};static#r=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var c=o(336),g=o(4532),f=o(5359),h=o(3714),U=o(9502),C=o(1423),Z=o(4104),P=o(8645),S=o(9773),E=o(2181),I=o(2628),q=o(5219);function M(r,i){if(1&r&&(t.TgZ(0,"small",19),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(e.nameControl))}}function b(r,i){if(1&r&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(e.emailControl))}}function N(r,i){1&r&&(t.TgZ(0,"h6"),t._uU(1,"Pick a password"),t.qZA())}function J(r,i){1&r&&(t._UZ(0,"p-divider"),t.TgZ(1,"p",21),t._uU(2,"Suggestions"),t.qZA(),t.TgZ(3,"ul",22)(4,"li"),t._uU(5,"At least one uppercase"),t.qZA(),t.TgZ(6,"li"),t._uU(7,"At least one numeric"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"Minimum 8 characters"),t.qZA()())}function O(r,i){if(1&r&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(e.passwordControl))}}function Y(r,i){if(1&r&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(e.confirmPasswordControl))}}function L(r,i){if(1&r&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(e.form))}}let Q=(()=>{class r{get nameControl(){return this.form.get("name")}get emailControl(){return this.form.get("email")}get passwordControl(){return this.form.get("password")}get confirmPasswordControl(){return this.form.get("confirmPassword")}getErrorMessage(e){if(!e||!e.errors)return"";const n=Object.keys(e.errors)[0];return n&&this.errorMessages[n]&&this.errorMessages[n]||"Wrong value"}onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const{email:e,name:n,password:s}=this.form.value;e&&n&&s&&this.store.dispatch(I.u.registerUser({credentials:{email:e,name:n,password:s}}))}constructor(e,n,s){this.fb=e,this.store=n,this.uniqueEmail=s,this.errorMessages={required:"Field is required",maxlength:"Name max length is 40 characters",pattern:"Name should consist of letters and spaces",email:"Incorrect email",passwordStrength:"Password should be at least 8 characters, has a uppercase letter, has a mixture of letters and numbers and include at least one special character, e.g., ! @ # ? ]",confirmPassword:"Passwords should match",emailExist:"Email already taken"},this.destroy$=new P.x,this.isLoading$=this.store.select(u.AP),this.emailError$=this.store.select(u.Hn).pipe((0,S.R)(this.destroy$),(0,E.h)(l=>!!l&&"PrimaryDuplicationException"===l.type)).subscribe({next:()=>{this.emailControl?.setErrors({emailExist:!0})}}),this.form=this.fb.group({name:["",[a.kI.required,a.kI.maxLength(40),a.kI.pattern(/^[a-zA-Z\s]+$/)]],email:["",[a.kI.required,a.kI.email],[this.uniqueEmail.validate.bind(this.uniqueEmail)]],password:["",[a.kI.required,y]],confirmPassword:["",[a.kI.required]]},{validators:[w]})}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(a.qu),t.Y36(d.yh),t.Y36(x))};static#r=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-signup"]],standalone:!0,features:[t.jDz],decls:36,vars:12,consts:[[1,"form-container"],[1,"title"],["routerLink","../login",1,"p-fluid",3,"raised"],[3,"formGroup"],[1,"field","p-fluid"],["for","firstname"],["formControlName","name","id","firstname","type","text","aria-describedby","Enter your first name","pInputText",""],["id","firstname-help","class","p-error",4,"ngIf"],["for","email"],["formControlName","email","id","email","type","email","aria-describedby","Enter your email","autocomplete","email","pInputText",""],["id","email-help","class","p-error",4,"ngIf"],["for","password"],["formControlName","password","id","password","aria-describedby","Enter your password","autocomplete","new-password",3,"toggleMask"],["pTemplate","header"],["pTemplate","footer"],["id","password-help","class","p-error",4,"ngIf"],["for","confirmPassword"],["formControlName","confirmPassword","id","confirmPassword","type","password","autocomplete","off","aria-describedby","Confirm your password","pInputText",""],["type","submit",1,"submit-btn",3,"disabled","raised","onClick"],["id","firstname-help",1,"p-error"],["id","email-help",1,"p-error"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"],["id","password-help",1,"p-error"]],template:function(n,s){1&n&&(t._UZ(0,"p-toast"),t.TgZ(1,"p-card",0)(2,"h2",1),t._uU(3,"Already has an account? Log in!"),t.qZA(),t.TgZ(4,"p-button",2),t._uU(5,"Log in"),t.qZA(),t._UZ(6,"p-divider"),t.TgZ(7,"h2",1),t._uU(8,"Are you new here? Sign up!"),t.qZA(),t.TgZ(9,"form",3)(10,"div",4)(11,"label",5),t._uU(12,"First name"),t.qZA(),t._UZ(13,"input",6),t.YNc(14,M,2,1,"small",7),t.qZA(),t.TgZ(15,"div",4)(16,"label",8),t._uU(17,"Email"),t.qZA(),t._UZ(18,"input",9),t.YNc(19,b,2,1,"small",10),t.qZA(),t.TgZ(20,"div",4)(21,"label",11),t._uU(22,"Password"),t.qZA(),t.TgZ(23,"p-password",12),t.YNc(24,N,2,0,"ng-template",13),t.YNc(25,J,10,0,"ng-template",14),t.qZA(),t.YNc(26,O,2,1,"small",15),t.qZA(),t.TgZ(27,"div",4)(28,"label",16),t._uU(29,"Confirm password"),t.qZA(),t._UZ(30,"input",17),t.YNc(31,Y,2,1,"small",15),t.YNc(32,L,2,1,"small",15),t.qZA(),t.TgZ(33,"p-button",18),t.NdJ("onClick",function($){return s.onSubmit(),$.preventDefault()}),t.ALo(34,"async"),t._uU(35,"Sign up"),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("raised",!0),t.xp6(5),t.Q6J("formGroup",s.form),t.xp6(5),t.Q6J("ngIf",(null==s.nameControl?null:s.nameControl.invalid)&&(null==s.nameControl?null:s.nameControl.touched)),t.xp6(5),t.Q6J("ngIf",(null==s.emailControl?null:s.emailControl.invalid)&&(null==s.emailControl?null:s.emailControl.touched)),t.xp6(4),t.Q6J("toggleMask",!0),t.xp6(3),t.Q6J("ngIf",(null==s.passwordControl?null:s.passwordControl.invalid)&&(null==s.passwordControl?null:s.passwordControl.touched)),t.xp6(5),t.Q6J("ngIf",(null==s.confirmPasswordControl?null:s.confirmPasswordControl.invalid)&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),t.xp6(1),t.Q6J("ngIf",s.form.hasError("confirmPassword")&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),t.xp6(1),t.Q6J("disabled",s.form.invalid||!!t.lcZ(34,10,s.isLoading$))("raised",!0))},dependencies:[m.ez,m.O5,m.Ov,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,g.d,g.Z,q.jx,c.hJ,c.zx,f.x,f.i,h.j,h.o,U.$,v.rH,C.gz,C.ro,Z.EV,Z.FN],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{max-width:500px;width:100%}.title[_ngcontent-%COMP%]{font-size:1rem}.field[_ngcontent-%COMP%]{margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{margin-top:.5rem;display:block}"],changeDetection:0})}return r})()}}]);