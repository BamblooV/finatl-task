"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[411],{7411:(z,p,o)=>{o.r(p),o.d(p,{SignupComponent:()=>Q});var m=o(6814),n=o(6223),Z=o(4087);const v=e=>{const a=e.get("password")?.value,r=e.get("confirmPassword")?.value;return a&&r&&a===r?null:{confirmPassword:!0}},w=e=>{const{value:a}=e;return a?a.length<8?{passwordStrength:"at least 8 characters"}:/[A-Z]+/.test(a)?/[0-9]+/.test(a)?/[!@#?\]]/.test(a)?null:{passwordStrength:"inclusion of at least one special character, e.g., ! @ # ? ]"}:{passwordStrength:"a mixture of letters and numbers"}:{passwordStrength:"a uppercase letter"}:null};var y=o(7398),T=o(8180),u=o(2284),t=o(5879),d=o(4221);let A=(()=>{class e{validate(r){return this.store.select(u.ZX).pipe((0,y.U)(i=>i&&r.value===i?{emailExist:!0}:null),(0,T.q)(1))}constructor(r){this.store=r}static#t=this.\u0275fac=function(i){return new(i||e)(t.LFG(d.yh))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var c=o(336),g=o(4532),f=o(5359),h=o(3714),x=o(9502),C=o(1423),P=o(8645),U=o(9773),S=o(2181),E=o(8926),I=o(2628),q=o(5219);function M(e,a){if(1&e&&(t.TgZ(0,"small",19),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.getErrorMessage(r.nameControl))}}function b(e,a){if(1&e&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.getErrorMessage(r.emailControl))}}function N(e,a){1&e&&(t.TgZ(0,"h6"),t._uU(1,"Pick a password"),t.qZA())}function J(e,a){1&e&&(t._UZ(0,"p-divider"),t.TgZ(1,"p",21),t._uU(2,"Suggestions"),t.qZA(),t.TgZ(3,"ul",22)(4,"li"),t._uU(5,"At least one uppercase"),t.qZA(),t.TgZ(6,"li"),t._uU(7,"At least one numeric"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"Minimum 8 characters"),t.qZA()())}function O(e,a){if(1&e&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.getErrorMessage(r.passwordControl))}}function Y(e,a){if(1&e&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.getErrorMessage(r.confirmPasswordControl))}}function L(e,a){if(1&e&&(t.TgZ(0,"small",23),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.getErrorMessage(r.form))}}let Q=(()=>{class e{get nameControl(){return this.form.get("name")}get emailControl(){return this.form.get("email")}get passwordControl(){return this.form.get("password")}get confirmPasswordControl(){return this.form.get("confirmPassword")}onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const{email:r,name:i,password:s}=this.form.value;r&&i&&s&&this.store.dispatch(I.u.registerUser({credentials:{email:r,name:i,password:s}}))}constructor(r,i,s){this.fb=r,this.store=i,this.uniqueEmail=s,this.errorMessages={required:"Field is required",maxlength:"Name max length is 40 characters",pattern:"Name should consist of letters and spaces",email:"Incorrect email",passwordStrength:"Password should be at least 8 characters, has a uppercase letter, has a mixture of letters and numbers and include at least one special character, e.g., ! @ # ? ]",confirmPassword:"Passwords should match",emailExist:"Email already taken"},this.destroy$=new P.x,this.isLoading$=this.store.select(u.AP),this.emailError$=this.store.select(u.Hn).pipe((0,U.R)(this.destroy$),(0,S.h)(l=>!!l&&"PrimaryDuplicationException"===l.type)).subscribe({next:()=>{this.emailControl?.setErrors({emailExist:!0})}}),this.form=this.fb.group({name:["",[n.kI.required,n.kI.maxLength(40),n.kI.pattern(/^[a-zA-Z\s]+$/)]],email:["",[n.kI.required,n.kI.email],[this.uniqueEmail.validate.bind(this.uniqueEmail)]],password:["",[n.kI.required,w]],confirmPassword:["",[n.kI.required]]},{validators:[v]}),this.getErrorMessage=(0,E.a)(this.errorMessages)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(n.qu),t.Y36(d.yh),t.Y36(A))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],standalone:!0,features:[t.jDz],decls:35,vars:12,consts:[[1,"form-container"],[1,"title"],["routerLink","../login",1,"p-fluid",3,"raised"],[3,"formGroup"],[1,"field","p-fluid"],["for","firstname"],["formControlName","name","id","firstname","type","text","aria-describedby","Enter your first name","pInputText",""],["id","firstname-help","class","p-error",4,"ngIf"],["for","email"],["formControlName","email","id","email","type","email","aria-describedby","Enter your email","autocomplete","email","pInputText",""],["id","email-help","class","p-error",4,"ngIf"],["for","password"],["formControlName","password","id","password","aria-describedby","Enter your password","autocomplete","new-password",3,"toggleMask"],["pTemplate","header"],["pTemplate","footer"],["id","password-help","class","p-error",4,"ngIf"],["for","confirmPassword"],["formControlName","confirmPassword","id","confirmPassword","type","password","autocomplete","off","aria-describedby","Confirm your password","pInputText",""],["type","submit",1,"submit-btn",3,"disabled","raised","onClick"],["id","firstname-help",1,"p-error"],["id","email-help",1,"p-error"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"],["id","password-help",1,"p-error"]],template:function(i,s){1&i&&(t.TgZ(0,"p-card",0)(1,"h2",1),t._uU(2,"Already has an account? Log in!"),t.qZA(),t.TgZ(3,"p-button",2),t._uU(4,"Log in"),t.qZA(),t._UZ(5,"p-divider"),t.TgZ(6,"h2",1),t._uU(7,"Are you new here? Sign up!"),t.qZA(),t.TgZ(8,"form",3)(9,"div",4)(10,"label",5),t._uU(11,"First name"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,M,2,1,"small",7),t.qZA(),t.TgZ(14,"div",4)(15,"label",8),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,b,2,1,"small",10),t.qZA(),t.TgZ(19,"div",4)(20,"label",11),t._uU(21,"Password"),t.qZA(),t.TgZ(22,"p-password",12),t.YNc(23,N,2,0,"ng-template",13),t.YNc(24,J,10,0,"ng-template",14),t.qZA(),t.YNc(25,O,2,1,"small",15),t.qZA(),t.TgZ(26,"div",4)(27,"label",16),t._uU(28,"Confirm password"),t.qZA(),t._UZ(29,"input",17),t.YNc(30,Y,2,1,"small",15),t.YNc(31,L,2,1,"small",15),t.qZA(),t.TgZ(32,"p-button",18),t.NdJ("onClick",function($){return s.onSubmit(),$.preventDefault()}),t.ALo(33,"async"),t._uU(34,"Sign up"),t.qZA()()()),2&i&&(t.xp6(3),t.Q6J("raised",!0),t.xp6(5),t.Q6J("formGroup",s.form),t.xp6(5),t.Q6J("ngIf",(null==s.nameControl?null:s.nameControl.invalid)&&(null==s.nameControl?null:s.nameControl.touched)),t.xp6(5),t.Q6J("ngIf",(null==s.emailControl?null:s.emailControl.invalid)&&(null==s.emailControl?null:s.emailControl.touched)),t.xp6(4),t.Q6J("toggleMask",!0),t.xp6(3),t.Q6J("ngIf",(null==s.passwordControl?null:s.passwordControl.invalid)&&(null==s.passwordControl?null:s.passwordControl.touched)),t.xp6(5),t.Q6J("ngIf",(null==s.confirmPasswordControl?null:s.confirmPasswordControl.invalid)&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),t.xp6(1),t.Q6J("ngIf",s.form.hasError("confirmPassword")&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),t.xp6(1),t.Q6J("disabled",s.form.invalid||!!t.lcZ(33,10,s.isLoading$))("raised",!0))},dependencies:[m.ez,m.O5,m.Ov,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,g.d,g.Z,q.jx,c.hJ,c.zx,f.x,f.i,h.j,h.o,x.$,Z.rH,C.gz,C.ro],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{max-width:500px;width:100%}.title[_ngcontent-%COMP%]{font-size:1rem}.field[_ngcontent-%COMP%]{margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{margin-top:.5rem;display:block}"],changeDetection:0})}return e})()}}]);