"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[626],{7626:(L,l,t)=>{t.r(l),t.d(l,{LoginComponent:()=>T});var a=t(6814),i=t(95),E=t(5961),m=t(336),d=t(4532),u=t(5359),_=t(3714),c=t(9502),p=t(1423),h=t(8645),C=t(9773),M=t(2181),g=t(2284),O=t(2628),r=t(5879),P=t(4221);function D(s,f){if(1&s&&(r.TgZ(0,"small",13),r._uU(1),r.qZA()),2&s){const o=r.oxw();r.xp6(1),r.Oqu(o.getErrorMessage(o.emailControl))}}function v(s,f){if(1&s&&(r.TgZ(0,"small",14),r._uU(1),r.qZA()),2&s){const o=r.oxw();r.xp6(1),r.Oqu(o.getErrorMessage(o.passwordControl))}}function A(s,f){if(1&s&&(r.TgZ(0,"small",15),r._uU(1),r.qZA()),2&s){const o=r.oxw();r.xp6(1),r.Oqu(o.getErrorMessage(o.form))}}let T=(()=>{class s{get emailControl(){return this.form.get("email")}get passwordControl(){return this.form.get("password")}getErrorMessage(o){if(!o||!o.errors)return"";const n=Object.keys(o.errors)[0];return n&&this.errorMessages[n]&&this.errorMessages[n]||"Wrong value"}onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const{email:o,password:n}=this.form.value;o&&n&&this.store.dispatch(O.u.loginUser({credentials:{email:o,password:n}}))}constructor(o,n){this.fb=o,this.store=n,this.errorMessages={required:"Field is required",email:"Incorrect email",notFound:"Unknown email or password"},this.destroy$=new h.x,this.isLoading$=this.store.select(g.AP),this.emailError$=this.store.select(g.Hn).pipe((0,C.R)(this.destroy$),(0,M.h)(e=>!!e&&"NotFoundException"===e.type)).subscribe({next:()=>{this.form.setErrors({notFound:!0})}}),this.form=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required]]})}ngOnDestroy(){this.destroy$.next()}static#r=this.\u0275fac=function(n){return new(n||s)(r.Y36(i.qu),r.Y36(P.yh))};static#o=this.\u0275cmp=r.Xpm({type:s,selectors:[["app-login"]],standalone:!0,features:[r.jDz],decls:23,vars:11,consts:[[1,"form-container"],[1,"title"],["routerLink","../signup",1,"p-fluid",3,"raised"],[3,"formGroup"],[1,"field","p-fluid"],["for","email"],["formControlName","email","id","email","type","email","aria-describedby","Enter your email","autocomplete","email","pInputText",""],["id","email-help","class","p-error",4,"ngIf"],["for","password"],["formControlName","password","id","password","aria-describedby","Enter your password","autocomplete","new-password",3,"toggleMask","feedback"],["id","password-help","class","p-error",4,"ngIf"],["class","p-error",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled","raised","onClick"],["id","email-help",1,"p-error"],["id","password-help",1,"p-error"],[1,"p-error"]],template:function(n,e){1&n&&(r.TgZ(0,"p-card",0)(1,"h2",1),r._uU(2,"Are yon new here? Create account!"),r.qZA(),r.TgZ(3,"p-button",2),r._uU(4,"Sign up"),r.qZA(),r._UZ(5,"p-divider"),r.TgZ(6,"h2",1),r._uU(7,"Hurry up to log in!"),r.qZA(),r.TgZ(8,"form",3)(9,"div",4)(10,"label",5),r._uU(11,"Email"),r.qZA(),r._UZ(12,"input",6),r.YNc(13,D,2,1,"small",7),r.qZA(),r.TgZ(14,"div",4)(15,"label",8),r._uU(16,"Password"),r.qZA(),r._UZ(17,"p-password",9),r.YNc(18,v,2,1,"small",10),r.YNc(19,A,2,1,"small",11),r.qZA(),r.TgZ(20,"p-button",12),r.NdJ("onClick",function(U){return e.onSubmit(),U.preventDefault()}),r.ALo(21,"async"),r._uU(22,"Log in"),r.qZA()()()),2&n&&(r.xp6(3),r.Q6J("raised",!0),r.xp6(5),r.Q6J("formGroup",e.form),r.xp6(5),r.Q6J("ngIf",(null==e.emailControl?null:e.emailControl.invalid)&&(null==e.emailControl?null:e.emailControl.touched)),r.xp6(4),r.Q6J("toggleMask",!0)("feedback",!1),r.xp6(1),r.Q6J("ngIf",(null==e.passwordControl?null:e.passwordControl.invalid)&&(null==e.passwordControl?null:e.passwordControl.touched)),r.xp6(1),r.Q6J("ngIf",e.form.invalid&&e.form.touched),r.xp6(1),r.Q6J("disabled",e.form.invalid||!!r.lcZ(21,9,e.isLoading$))("raised",!0))},dependencies:[a.ez,a.O5,a.Ov,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.d,d.Z,m.hJ,m.zx,u.x,u.i,_.j,_.o,c.$,E.rH,p.gz,p.ro],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{max-width:500px;width:100%}.title[_ngcontent-%COMP%]{font-size:1rem}.field[_ngcontent-%COMP%]{margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{margin-top:.5rem;display:block}"],changeDetection:0})}return s})()}}]);