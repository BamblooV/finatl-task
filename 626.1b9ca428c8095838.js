"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[626],{7626:(I,l,o)=>{o.r(l),o.d(l,{LoginComponent:()=>U});var a=o(6814),i=o(95),C=o(5961),m=o(336),d=o(4532),_=o(5359),u=o(3714),c=o(9502),p=o(1423),g=o(4104),h=o(8645),M=o(9773),O=o(2181),f=o(2284),P=o(2628),r=o(5879),D=o(4221);function v(s,E){if(1&s&&(r.TgZ(0,"small",13),r._uU(1),r.qZA()),2&s){const t=r.oxw();r.xp6(1),r.Oqu(t.getErrorMessage(t.emailControl))}}function A(s,E){if(1&s&&(r.TgZ(0,"small",14),r._uU(1),r.qZA()),2&s){const t=r.oxw();r.xp6(1),r.Oqu(t.getErrorMessage(t.passwordControl))}}function T(s,E){if(1&s&&(r.TgZ(0,"small",15),r._uU(1),r.qZA()),2&s){const t=r.oxw();r.xp6(1),r.Oqu(t.getErrorMessage(t.form))}}let U=(()=>{class s{get emailControl(){return this.form.get("email")}get passwordControl(){return this.form.get("password")}getErrorMessage(t){if(!t||!t.errors)return"";const n=Object.keys(t.errors)[0];return n&&this.errorMessages[n]&&this.errorMessages[n]||"Wrong value"}onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const{email:t,password:n}=this.form.value;t&&n&&this.store.dispatch(P.u.loginUser({credentials:{email:t,password:n}}))}constructor(t,n){this.fb=t,this.store=n,this.errorMessages={required:"Field is required",email:"Incorrect email",notFound:"Unknown email or password"},this.destroy$=new h.x,this.isLoading$=this.store.select(f.AP),this.emailError$=this.store.select(f.Hn).pipe((0,M.R)(this.destroy$),(0,O.h)(e=>!!e&&"NotFoundException"===e.type)).subscribe({next:()=>{this.form.setErrors({notFound:!0})}}),this.form=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required]]})}ngOnDestroy(){this.destroy$.next()}static#r=this.\u0275fac=function(n){return new(n||s)(r.Y36(i.qu),r.Y36(D.yh))};static#o=this.\u0275cmp=r.Xpm({type:s,selectors:[["app-login"]],standalone:!0,features:[r.jDz],decls:24,vars:11,consts:[[1,"form-container"],[1,"title"],["routerLink","../signup",1,"p-fluid",3,"raised"],[3,"formGroup"],[1,"field","p-fluid"],["for","email"],["formControlName","email","id","email","type","email","aria-describedby","Enter your email","autocomplete","email","pInputText",""],["id","email-help","class","p-error",4,"ngIf"],["for","password"],["formControlName","password","id","password","aria-describedby","Enter your password","autocomplete","new-password",3,"toggleMask","feedback"],["id","password-help","class","p-error",4,"ngIf"],["class","p-error",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled","raised","onClick"],["id","email-help",1,"p-error"],["id","password-help",1,"p-error"],[1,"p-error"]],template:function(n,e){1&n&&(r._UZ(0,"p-toast"),r.TgZ(1,"p-card",0)(2,"h2",1),r._uU(3,"Are yon new here? Create account!"),r.qZA(),r.TgZ(4,"p-button",2),r._uU(5,"Sign up"),r.qZA(),r._UZ(6,"p-divider"),r.TgZ(7,"h2",1),r._uU(8,"Hurry up to log in!"),r.qZA(),r.TgZ(9,"form",3)(10,"div",4)(11,"label",5),r._uU(12,"Email"),r.qZA(),r._UZ(13,"input",6),r.YNc(14,v,2,1,"small",7),r.qZA(),r.TgZ(15,"div",4)(16,"label",8),r._uU(17,"Password"),r.qZA(),r._UZ(18,"p-password",9),r.YNc(19,A,2,1,"small",10),r.YNc(20,T,2,1,"small",11),r.qZA(),r.TgZ(21,"p-button",12),r.NdJ("onClick",function(L){return e.onSubmit(),L.preventDefault()}),r.ALo(22,"async"),r._uU(23,"Log in"),r.qZA()()()),2&n&&(r.xp6(4),r.Q6J("raised",!0),r.xp6(5),r.Q6J("formGroup",e.form),r.xp6(5),r.Q6J("ngIf",(null==e.emailControl?null:e.emailControl.invalid)&&(null==e.emailControl?null:e.emailControl.touched)),r.xp6(4),r.Q6J("toggleMask",!0)("feedback",!1),r.xp6(1),r.Q6J("ngIf",(null==e.passwordControl?null:e.passwordControl.invalid)&&(null==e.passwordControl?null:e.passwordControl.touched)),r.xp6(1),r.Q6J("ngIf",e.form.invalid&&e.form.touched),r.xp6(1),r.Q6J("disabled",e.form.invalid||!!r.lcZ(22,9,e.isLoading$))("raised",!0))},dependencies:[a.ez,a.O5,a.Ov,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,d.d,d.Z,m.hJ,m.zx,_.x,_.i,u.j,u.o,c.$,C.rH,p.gz,p.ro,g.EV,g.FN],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{max-width:500px;width:100%}.title[_ngcontent-%COMP%]{font-size:1rem}.field[_ngcontent-%COMP%]{margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{margin-top:.5rem;display:block}"],changeDetection:0})}return s})()}}]);