"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[951],{8926:(M,g,o)=>{o.d(g,{a:()=>s});const s=f=>c=>{if(!c||!c.errors)return"";const u=Object.keys(c.errors)[0];return u&&f[u]&&f[u]||"Wrong value"}},7951:(M,g,o)=>{o.r(g),o.d(g,{ProfileComponent:()=>O});var s=o(6814),f=o(8645),c=o(9773),u=o(9397),h=o(336),l=o(3714),_=o(6223),m=o(8926),a=o(3002),p=o(2628),t=o(5879),x=o(4221);function v(e,d){if(1&e){const n=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setEditMode())}),t._uU(1,"Edit"),t.qZA()}}function E(e,d){if(1&e){const n=t.EpF();t.TgZ(0,"span",10)(1,"button",11),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.editUserInfo())}),t.ALo(2,"async"),t._uU(3," Save "),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.setViewMode())}),t.ALo(5,"async"),t._uU(6,"Cancel"),t.qZA()()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("disabled",n.name.invalid||t.lcZ(2,2,n.loading$)),t.xp6(3),t.Q6J("disabled",t.lcZ(5,4,n.loading$))}}function I(e,d){if(1&e&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(1),t.Oqu(n.name)}}function T(e,d){if(1&e&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&e){const n=t.oxw(3);t.xp6(1),t.Oqu(n.getErrorMessage(n.name))}}function P(e,d){if(1&e&&(t.ynx(0),t.TgZ(1,"div",13),t._UZ(2,"input",14),t.YNc(3,T,2,1,"small",15),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("formControl",n.name),t.xp6(1),t.Q6J("ngIf",(null==n.name?null:n.name.invalid)&&(null==n.name?null:n.name.touched))}}function Z(e,d){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,v,2,0,"button",2),t.YNc(3,E,7,6,"span",3),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.logout())}),t.ALo(5,"async"),t._uU(6,"Logout"),t.qZA()(),t.TgZ(7,"h2"),t._uU(8,"User profile"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6),t._uU(11,"Name:"),t.qZA(),t.YNc(12,I,2,1,"div",7),t.YNc(13,P,4,2,"ng-container",0),t.qZA(),t.TgZ(14,"div",5)(15,"div",6),t._uU(16,"Email:"),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA()(),t.TgZ(19,"div",5)(20,"div",6),t._uU(21,"ID:"),t.qZA(),t.TgZ(22,"div",8),t._uU(23),t.qZA()(),t.TgZ(24,"div",5)(25,"div",6),t._uU(26,"Created at:"),t.qZA(),t.TgZ(27,"div",8),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.BQk()}if(2&e){const n=d.ngIf,i=t.oxw();t.xp6(2),t.Q6J("ngIf","view"===i.mode),t.xp6(1),t.Q6J("ngIf","edit"===i.mode),t.xp6(1),t.Q6J("disabled",t.lcZ(5,8,i.authLoading$)),t.xp6(8),t.Q6J("ngIf","view"===i.mode),t.xp6(1),t.Q6J("ngIf","edit"===i.mode),t.xp6(5),t.Oqu(n.email),t.xp6(5),t.Oqu(n.uid),t.xp6(5),t.Oqu(t.xi3(29,10,n.createdAt,"medium"))}}function A(e,d){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",4),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.logout())}),t.ALo(2,"async"),t._uU(3,"Logout"),t.qZA(),t.TgZ(4,"h2",17),t._uU(5,"Something went wrong"),t.qZA(),t.TgZ(6,"div",5)(7,"div",6),t._uU(8),t.qZA()(),t._UZ(9,"div",1),t.BQk()}if(2&e){const n=d.ngIf,i=t.oxw();t.xp6(1),t.Q6J("disabled",t.lcZ(2,2,i.authLoading$)),t.xp6(7),t.Oqu(n.message)}}function C(e,d){1&e&&(t.ynx(0),t.TgZ(1,"h2",17),t._uU(2,"Load user profile data"),t.qZA(),t.BQk())}let O=(()=>{class e{changeMode(n){this.mode=n}setEditMode(){this.changeMode("edit")}setViewMode(){this.changeMode("view"),this.name.reset()}editUserInfo(){this.name.invalid||this.store.dispatch(a.a.updateUserName({name:this.name.value}))}logout(){this.store.dispatch(p.u.logout())}constructor(n){this.store=n,this.errorMessages={required:"Field is required",maxlength:"Name max length is 40 characters",pattern:"Name should consist of letters and spaces"},this.mode="view",this.name=new _.NI("",[_.kI.required,_.kI.maxLength(40),_.kI.pattern(/^[a-zA-Z\s]+$/)]),this.destroy$=new f.x,this.userInfo$=this.store.select(a.h.S8).pipe((0,c.R)(this.destroy$),(0,u.b)(i=>{this.name=new _.NI(i?.name||"",{validators:[_.kI.required,_.kI.maxLength(40),_.kI.pattern(/^[a-zA-Z\s]+$/)],nonNullable:!0})})),this.loading$=this.store.select(a.h.In).pipe((0,c.R)(this.destroy$)),this.error$=this.store.select(a.h._7).pipe((0,c.R)(this.destroy$)),this.authLoading$=this.store.select(p.c.AP).pipe((0,c.R)(this.destroy$)),this.getErrorMessage=(0,m.a)(this.errorMessages)}ngOnInit(){this.store.dispatch(a.a.fetchUserInfo())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(x.yh))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],standalone:!0,features:[t.jDz],decls:7,vars:11,consts:[[4,"ngIf"],[1,"controls"],["pButton","","pRipple","","icon","pi pi-user-edit",3,"click",4,"ngIf"],["class","p-buttonset",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-sign-out",3,"disabled","click"],[1,"data-row"],[1,"label"],["class","data",4,"ngIf"],[1,"data"],["pButton","","pRipple","","icon","pi pi-user-edit",3,"click"],[1,"p-buttonset"],["pButton","","pRipple","","icon","pi pi-save",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times",3,"disabled","click"],[1,"field"],["type","text","pInputText","",3,"formControl"],["id","firstname-help","class","p-error",4,"ngIf"],["id","firstname-help",1,"p-error"],[1,"error-title"]],template:function(i,r){1&i&&(t.YNc(0,Z,30,13,"ng-container",0),t.ALo(1,"async"),t.YNc(2,A,10,4,"ng-container",0),t.ALo(3,"async"),t.YNc(4,C,3,0,"ng-container",0),t.ALo(5,"async"),t.ALo(6,"async")),2&i&&(t.Q6J("ngIf",t.lcZ(1,3,r.userInfo$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,5,r.error$)),t.xp6(2),t.Q6J("ngIf",null===t.lcZ(5,7,r.userInfo$)&&t.lcZ(6,9,r.loading$)))},dependencies:[s.ez,s.O5,s.Ov,s.uU,h.hJ,h.Hq,l.j,l.o,_.UX,_.Fj,_.JJ,_.oH],styles:["[_nghost-%COMP%]{padding:10px 0;display:block}.data-row[_ngcontent-%COMP%]{margin-bottom:.5rem}.label[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.data[_ngcontent-%COMP%]{margin-top:.25rem}.field[_ngcontent-%COMP%]{margin-top:.25rem;display:flex;flex-direction:column;gap:.1rem;max-width:20rem}.error-title[_ngcontent-%COMP%]{color:var(--red-800)}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}"],changeDetection:0})}return e})()},3714:(M,g,o)=>{o.d(g,{j:()=>h,o:()=>u});var s=o(5879),f=o(6814),c=o(6223);let u=(()=>{class l{el;ngModel;cd;filled;constructor(m,a,p){this.el=m,this.ngModel=a,this.cd=p}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(a){return new(a||l)(s.Y36(s.SBq),s.Y36(c.On,8),s.Y36(s.sBO))};static \u0275dir=s.lG2({type:l,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(a,p){1&a&&s.NdJ("input",function(x){return p.onInput(x)}),2&a&&s.ekj("p-filled",p.filled)}})}return l})(),h=(()=>{class l{static \u0275fac=function(a){return new(a||l)};static \u0275mod=s.oAB({type:l});static \u0275inj=s.cJS({imports:[f.ez]})}return l})()}}]);