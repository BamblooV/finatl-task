"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[951],{8926:(M,g,o)=>{o.d(g,{a:()=>i});const i=f=>c=>{if(!c||!c.errors)return"";const u=Object.keys(c.errors)[0];return u&&f[u]&&f[u]||"Wrong value"}},7951:(M,g,o)=>{o.r(g),o.d(g,{ProfileComponent:()=>Z});var i=o(6814),f=o(8645),c=o(9773),u=o(9397),h=o(336),r=o(3714),l=o(6223),m=o(8926),a=o(3002),p=o(2628),t=o(5879),x=o(4221);function v(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const _=t.oxw(2);return t.KtG(_.setEditMode())}),t._uU(1,"Edit"),t.qZA()}}function I(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"span",10)(1,"button",11),t.NdJ("click",function(){t.CHM(e);const _=t.oxw(2);return t.KtG(_.editUserInfo())}),t.ALo(2,"async"),t._uU(3," Save "),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){t.CHM(e);const _=t.oxw(2);return t.KtG(_.setViewMode())}),t.ALo(5,"async"),t._uU(6,"Cancel"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.name.invalid||t.lcZ(2,2,e.loading$)),t.xp6(3),t.Q6J("disabled",t.lcZ(5,4,e.loading$))}}function E(n,d){if(1&n&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Oqu(e.name)}}function P(n,d){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.getErrorMessage(e.name))}}function T(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"div",13),t._UZ(2,"input",14),t.YNc(3,P,2,1,"small",15),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("formControl",e.name),t.xp6(1),t.Q6J("ngIf",(null==e.name?null:e.name.invalid)&&(null==e.name?null:e.name.touched))}}function O(n,d){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.YNc(2,v,2,0,"button",2),t.YNc(3,I,7,6,"span",3),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.logout())}),t.ALo(5,"async"),t._uU(6,"Logout"),t.qZA()(),t.TgZ(7,"h2"),t._uU(8,"User profile"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6),t._uU(11,"Name:"),t.qZA(),t.YNc(12,E,2,1,"div",7),t.YNc(13,T,4,2,"ng-container",0),t.qZA(),t.TgZ(14,"div",5)(15,"div",6),t._uU(16,"Email:"),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA()(),t.TgZ(19,"div",5)(20,"div",6),t._uU(21,"ID:"),t.qZA(),t.TgZ(22,"div",8),t._uU(23),t.qZA()(),t.TgZ(24,"div",5)(25,"div",6),t._uU(26,"Created at:"),t.qZA(),t.TgZ(27,"div",8),t._uU(28),t.ALo(29,"date"),t.qZA()(),t.BQk()}if(2&n){const e=d.ngIf,s=t.oxw();t.xp6(2),t.Q6J("ngIf","view"===s.mode),t.xp6(1),t.Q6J("ngIf","edit"===s.mode),t.xp6(1),t.Q6J("disabled",t.lcZ(5,8,s.authLoading$)),t.xp6(8),t.Q6J("ngIf","view"===s.mode),t.xp6(1),t.Q6J("ngIf","edit"===s.mode),t.xp6(5),t.Oqu(e.email),t.xp6(5),t.Oqu(e.uid),t.xp6(5),t.Oqu(t.xi3(29,10,e.createdAt,"medium"))}}function A(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",17),t._uU(2,"Something went wrong"),t.qZA(),t.TgZ(3,"div",5)(4,"div",6),t._uU(5),t.qZA()(),t._UZ(6,"div",1),t.BQk()),2&n){const e=d.ngIf;t.xp6(5),t.Oqu(e.message)}}function C(n,d){1&n&&(t.ynx(0),t.TgZ(1,"h2",17),t._uU(2,"Load user profile data"),t.qZA(),t.BQk())}let Z=(()=>{class n{changeMode(e){this.mode=e}setEditMode(){this.changeMode("edit")}setViewMode(){this.changeMode("view"),this.name.reset()}editUserInfo(){this.name.invalid||this.store.dispatch(a.a.updateUserName({name:this.name.value}))}logout(){this.store.dispatch(p.u.logout())}constructor(e){this.store=e,this.errorMessages={required:"Field is required",maxlength:"Name max length is 40 characters",pattern:"Name should consist of letters and spaces"},this.mode="view",this.name=new l.NI("",[l.kI.required,l.kI.maxLength(40),l.kI.pattern(/^[a-zA-Z\s]+$/)]),this.destroy$=new f.x,this.userInfo$=this.store.select(a.h.S8).pipe((0,c.R)(this.destroy$),(0,u.b)(s=>{this.name=new l.NI(s?.name||"",{validators:[l.kI.required,l.kI.maxLength(40),l.kI.pattern(/^[a-zA-Z\s]+$/)],nonNullable:!0})})),this.loading$=this.store.select(a.h.In).pipe((0,c.R)(this.destroy$)),this.error$=this.store.select(a.h._7).pipe((0,c.R)(this.destroy$)),this.authLoading$=this.store.select(p.c.AP).pipe((0,c.R)(this.destroy$)),this.getErrorMessage=(0,m.a)(this.errorMessages)}ngOnInit(){this.store.dispatch(a.a.fetchUserInfo())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(x.yh))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],standalone:!0,features:[t.jDz],decls:7,vars:11,consts:[[4,"ngIf"],[1,"controls"],["pButton","","pRipple","","icon","pi pi-user-edit",3,"click",4,"ngIf"],["class","p-buttonset",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-sign-out",3,"disabled","click"],[1,"data-row"],[1,"label"],["class","data",4,"ngIf"],[1,"data"],["pButton","","pRipple","","icon","pi pi-user-edit",3,"click"],[1,"p-buttonset"],["pButton","","pRipple","","icon","pi pi-save",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-times",3,"disabled","click"],[1,"field"],["type","text","pInputText","",3,"formControl"],["id","firstname-help","class","p-error",4,"ngIf"],["id","firstname-help",1,"p-error"],[1,"error-title"]],template:function(s,_){1&s&&(t.YNc(0,O,30,13,"ng-container",0),t.ALo(1,"async"),t.YNc(2,A,7,1,"ng-container",0),t.ALo(3,"async"),t.YNc(4,C,3,0,"ng-container",0),t.ALo(5,"async"),t.ALo(6,"async")),2&s&&(t.Q6J("ngIf",t.lcZ(1,3,_.userInfo$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,5,_.error$)),t.xp6(2),t.Q6J("ngIf",null===t.lcZ(5,7,_.userInfo$)&&t.lcZ(6,9,_.loading$)))},dependencies:[i.ez,i.O5,i.Ov,i.uU,h.hJ,h.Hq,r.j,r.o,l.UX,l.Fj,l.JJ,l.oH],styles:["[_nghost-%COMP%]{padding:10px 0;display:block}.data-row[_ngcontent-%COMP%]{margin-bottom:.5rem}.label[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.data[_ngcontent-%COMP%]{margin-top:.25rem}.field[_ngcontent-%COMP%]{margin-top:.25rem;display:flex;flex-direction:column;gap:.1rem;max-width:20rem}.error-title[_ngcontent-%COMP%]{color:var(--red-800)}.controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}"],changeDetection:0})}return n})()},3714:(M,g,o)=>{o.d(g,{j:()=>h,o:()=>u});var i=o(5879),f=o(6814),c=o(6223);let u=(()=>{class r{el;ngModel;cd;filled;constructor(m,a,p){this.el=m,this.ngModel=a,this.cd=p}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(a){return new(a||r)(i.Y36(i.SBq),i.Y36(c.On,8),i.Y36(i.sBO))};static \u0275dir=i.lG2({type:r,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(a,p){1&a&&i.NdJ("input",function(x){return p.onInput(x)}),2&a&&i.ekj("p-filled",p.filled)}})}return r})(),h=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=i.oAB({type:r});static \u0275inj=i.cJS({imports:[f.ez]})}return r})()}}]);