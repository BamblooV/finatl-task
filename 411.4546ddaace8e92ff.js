"use strict";(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[411],{7411:($,p,n)=>{n.r(p),n.d(p,{SignupComponent:()=>L});var m=n(6814),a=n(95),Z=n(5961);const v=t=>{const i=t.get("password")?.value,e=t.get("confirmPassword")?.value;return i&&e&&i===e?null:{confirmPassword:!0}},w=t=>{const{value:i}=t;return i?i.length<8?{passwordStrength:"at least 8 characters"}:/[A-Z]+/.test(i)?/[0-9]+/.test(i)?/[!@#?\]]/.test(i)?null:{passwordStrength:"inclusion of at least one special character, e.g., ! @ # ? ]"}:{passwordStrength:"a mixture of letters and numbers"}:{passwordStrength:"a uppercase letter"}:null};var y=n(7398),T=n(8180),u=n(2284),r=n(5879),d=n(4221);let A=(()=>{class t{validate(e){return this.store.select(u.ZX).pipe((0,y.U)(o=>o&&e.value===o?{emailExist:!0}:null),(0,T.q)(1))}constructor(e){this.store=e}static#r=this.\u0275fac=function(o){return new(o||t)(r.LFG(d.yh))};static#t=this.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var c=n(336),g=n(4532),f=n(5359),h=n(3714),x=n(9502),C=n(1423),P=n(8645),U=n(9773),S=n(2181),E=n(2628),I=n(5219);function q(t,i){if(1&t&&(r.TgZ(0,"small",19),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Oqu(e.getErrorMessage(e.nameControl))}}function b(t,i){if(1&t&&(r.TgZ(0,"small",20),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Oqu(e.getErrorMessage(e.emailControl))}}function M(t,i){1&t&&(r.TgZ(0,"h6"),r._uU(1,"Pick a password"),r.qZA())}function N(t,i){1&t&&(r._UZ(0,"p-divider"),r.TgZ(1,"p",21),r._uU(2,"Suggestions"),r.qZA(),r.TgZ(3,"ul",22)(4,"li"),r._uU(5,"At least one uppercase"),r.qZA(),r.TgZ(6,"li"),r._uU(7,"At least one numeric"),r.qZA(),r.TgZ(8,"li"),r._uU(9,"Minimum 8 characters"),r.qZA()())}function J(t,i){if(1&t&&(r.TgZ(0,"small",23),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Oqu(e.getErrorMessage(e.passwordControl))}}function O(t,i){if(1&t&&(r.TgZ(0,"small",23),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Oqu(e.getErrorMessage(e.confirmPasswordControl))}}function Y(t,i){if(1&t&&(r.TgZ(0,"small",23),r._uU(1),r.qZA()),2&t){const e=r.oxw();r.xp6(1),r.Oqu(e.getErrorMessage(e.form))}}let L=(()=>{class t{get nameControl(){return this.form.get("name")}get emailControl(){return this.form.get("email")}get passwordControl(){return this.form.get("password")}get confirmPasswordControl(){return this.form.get("confirmPassword")}getErrorMessage(e){if(!e||!e.errors)return"";const o=Object.keys(e.errors)[0];return o&&this.errorMessages[o]&&this.errorMessages[o]||"Wrong value"}onSubmit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const{email:e,name:o,password:s}=this.form.value;e&&o&&s&&this.store.dispatch(E.u.registerUser({credentials:{email:e,name:o,password:s}}))}constructor(e,o,s){this.fb=e,this.store=o,this.uniqueEmail=s,this.errorMessages={required:"Field is required",maxlength:"Name max length is 40 characters",pattern:"Name should consist of letters and spaces",email:"Incorrect email",passwordStrength:"Password should be at least 8 characters, has a uppercase letter, has a mixture of letters and numbers and include at least one special character, e.g., ! @ # ? ]",confirmPassword:"Passwords should match",emailExist:"Email already taken"},this.destroy$=new P.x,this.isLoading$=this.store.select(u.AP),this.emailError$=this.store.select(u.Hn).pipe((0,U.R)(this.destroy$),(0,S.h)(l=>!!l&&"PrimaryDuplicationException"===l.type)).subscribe({next:()=>{this.emailControl?.setErrors({emailExist:!0})}}),this.form=this.fb.group({name:["",[a.kI.required,a.kI.maxLength(40),a.kI.pattern(/^[a-zA-Z\s]+$/)]],email:["",[a.kI.required,a.kI.email],[this.uniqueEmail.validate.bind(this.uniqueEmail)]],password:["",[a.kI.required,w]],confirmPassword:["",[a.kI.required]]},{validators:[v]})}ngOnDestroy(){this.destroy$.next()}static#r=this.\u0275fac=function(o){return new(o||t)(r.Y36(a.qu),r.Y36(d.yh),r.Y36(A))};static#t=this.\u0275cmp=r.Xpm({type:t,selectors:[["app-signup"]],standalone:!0,features:[r.jDz],decls:35,vars:12,consts:[[1,"form-container"],[1,"title"],["routerLink","../login",1,"p-fluid",3,"raised"],[3,"formGroup"],[1,"field","p-fluid"],["for","firstname"],["formControlName","name","id","firstname","type","text","aria-describedby","Enter your first name","pInputText",""],["id","firstname-help","class","p-error",4,"ngIf"],["for","email"],["formControlName","email","id","email","type","email","aria-describedby","Enter your email","autocomplete","email","pInputText",""],["id","email-help","class","p-error",4,"ngIf"],["for","password"],["formControlName","password","id","password","aria-describedby","Enter your password","autocomplete","new-password",3,"toggleMask"],["pTemplate","header"],["pTemplate","footer"],["id","password-help","class","p-error",4,"ngIf"],["for","confirmPassword"],["formControlName","confirmPassword","id","confirmPassword","type","password","autocomplete","off","aria-describedby","Confirm your password","pInputText",""],["type","submit",1,"submit-btn",3,"disabled","raised","onClick"],["id","firstname-help",1,"p-error"],["id","email-help",1,"p-error"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"],["id","password-help",1,"p-error"]],template:function(o,s){1&o&&(r.TgZ(0,"p-card",0)(1,"h2",1),r._uU(2,"Already has an account? Log in!"),r.qZA(),r.TgZ(3,"p-button",2),r._uU(4,"Log in"),r.qZA(),r._UZ(5,"p-divider"),r.TgZ(6,"h2",1),r._uU(7,"Are you new here? Sign up!"),r.qZA(),r.TgZ(8,"form",3)(9,"div",4)(10,"label",5),r._uU(11,"First name"),r.qZA(),r._UZ(12,"input",6),r.YNc(13,q,2,1,"small",7),r.qZA(),r.TgZ(14,"div",4)(15,"label",8),r._uU(16,"Email"),r.qZA(),r._UZ(17,"input",9),r.YNc(18,b,2,1,"small",10),r.qZA(),r.TgZ(19,"div",4)(20,"label",11),r._uU(21,"Password"),r.qZA(),r.TgZ(22,"p-password",12),r.YNc(23,M,2,0,"ng-template",13),r.YNc(24,N,10,0,"ng-template",14),r.qZA(),r.YNc(25,J,2,1,"small",15),r.qZA(),r.TgZ(26,"div",4)(27,"label",16),r._uU(28,"Confirm password"),r.qZA(),r._UZ(29,"input",17),r.YNc(30,O,2,1,"small",15),r.YNc(31,Y,2,1,"small",15),r.qZA(),r.TgZ(32,"p-button",18),r.NdJ("onClick",function(Q){return s.onSubmit(),Q.preventDefault()}),r.ALo(33,"async"),r._uU(34,"Sign up"),r.qZA()()()),2&o&&(r.xp6(3),r.Q6J("raised",!0),r.xp6(5),r.Q6J("formGroup",s.form),r.xp6(5),r.Q6J("ngIf",(null==s.nameControl?null:s.nameControl.invalid)&&(null==s.nameControl?null:s.nameControl.touched)),r.xp6(5),r.Q6J("ngIf",(null==s.emailControl?null:s.emailControl.invalid)&&(null==s.emailControl?null:s.emailControl.touched)),r.xp6(4),r.Q6J("toggleMask",!0),r.xp6(3),r.Q6J("ngIf",(null==s.passwordControl?null:s.passwordControl.invalid)&&(null==s.passwordControl?null:s.passwordControl.touched)),r.xp6(5),r.Q6J("ngIf",(null==s.confirmPasswordControl?null:s.confirmPasswordControl.invalid)&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),r.xp6(1),r.Q6J("ngIf",s.form.hasError("confirmPassword")&&(null==s.confirmPasswordControl?null:s.confirmPasswordControl.touched)),r.xp6(1),r.Q6J("disabled",s.form.invalid||!!r.lcZ(33,10,s.isLoading$))("raised",!0))},dependencies:[m.ez,m.O5,m.Ov,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,g.d,g.Z,I.jx,c.hJ,c.zx,f.x,f.i,h.j,h.o,x.$,Z.rH,C.gz,C.ro],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{max-width:500px;width:100%}.title[_ngcontent-%COMP%]{font-size:1rem}.field[_ngcontent-%COMP%]{margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{margin-top:.5rem;display:block}"],changeDetection:0})}return t})()}}]);